[include moonraker_obico_macros.cfg]
# This file contains pin mappings for the Creality Ender 5 Plus with a BTT Octopus Pro.

# See docs/Config_Reference.md for a description of parameters.

[include mainsail.cfg]
[include macros.cfg]
[include Adaptive_Mesh.cfg]
[include Line_Purge.cfg]
[include tmc2209.cfg]
[include fans.cfg]
[include extruder.cfg]
[include chameleonMacros.cfg]
[include notifications.cfg]

[stepper_x]
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
microsteps: 16
rotation_distance: 40
endstop_pin: PG6
position_endstop: 365
position_max: 365
homing_speed: 100

[stepper_y]
step_pin: PG0
dir_pin: !PG1
enable_pin: !PF15
microsteps: 16
rotation_distance: 40
endstop_pin: PG9
position_endstop: 365
position_max: 365
homing_speed: 100

[stepper_z1]
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
microsteps: 16
rotation_distance: 4

[stepper_z]
step_pin: PG4
dir_pin: !PC1
enable_pin: !PA0
microsteps: 16
rotation_distance: 4
endstop_pin: probe:z_virtual_endstop
#endstop_pin: PG12
#position_endstop: 0
position_max: 400
position_min: -5
homing_speed: 10.0

[z_tilt]
z_positions: -40,200
  400,200
points: 0,200
  300,200
speed: 150
horizontal_move_z: 5
retries: 10
retry_tolerance: 0.01

[safe_z_home]
#home_xy_position: 329.60, 372
home_xy_position: 126.5, 206.5
speed: 100
z_hop: 10
z_hop_speed: 5

[bltouch]
sensor_pin: ^PB7
control_pin: PB6
x_offset: 56
y_offset: -24
#z_offset: 2
speed: 3.0
stow_on_each_sample: false
probe_with_touch_mode: true
#pin_up_touch_mode_reports_triggered: False

[bed_mesh]
speed: 200
horizontal_move_z: 5
mesh_min: 56, 0
mesh_max: 360, 340
#probe_count: 5,5
probe_count: 21, 21
algorithm: bicubic
bicubic_tension: 0.2
mesh_pps: 10,10
fade_start:1
fade_end:3

[heater_bed]
heater_pin: PB11 #HE3
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PF7
control: pid
pid_Kp: 690.34
pid_Ki: 111.47
pid_Kd: 1068.83
min_temp: 0
max_temp: 130

[temperature_sensor RPi]
sensor_type: temperature_host

[mcu]
#serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_26002900105053424E363620-if00
#serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0
#serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.1:1.0
serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.2:1.0

#[mcu adxl]
#serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.4:1.0

#[adxl345]
#cs_pin: adxl:gpio9
#spi_software_sclk_pin: adxl:gpio10
#spi_software_mosi_pin: adxl:gpio11
#spi_software_miso_pin: adxl:gpio12

#[resonance_tester]
#accel_chip: adxl345
#probe_points:
#    175, 175, 200

[printer]
kinematics: cartesian
max_velocity: 500
#max_accel: 4000 #can run here, but no reason to for now
max_accel: 2000 #run here for now
max_z_velocity: 15
max_z_accel: 150

[endstop_phase]

[respond]

[force_move]
enable_force_move: true
#   Set to true to enable FORCE_MOVE and SET_KINEMATIC_POSITION
#   extended G-Code commands. The default is false.

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.475000, -0.470000, -0.437500, -0.403750, -0.362500, -0.333750, -0.332500, -0.303750, -0.310000, -0.315000, -0.317500, -0.316250, -0.322500, -0.353750, -0.358750, -0.408750, -0.398750, -0.443750, -0.461250, -0.491250, -0.493750
#*# 	  -0.417500, -0.430000, -0.406250, -0.376250, -0.370000, -0.331250, -0.335000, -0.313750, -0.321250, -0.310000, -0.325000, -0.325000, -0.327500, -0.361250, -0.378750, -0.415000, -0.413750, -0.457500, -0.465000, -0.497500, -0.495000
#*# 	  -0.400000, -0.373750, -0.318750, -0.305000, -0.297500, -0.276250, -0.272500, -0.230000, -0.258750, -0.260000, -0.296250, -0.295000, -0.287500, -0.316250, -0.323750, -0.381250, -0.371250, -0.421250, -0.451250, -0.476250, -0.497500
#*# 	  -0.322500, -0.312500, -0.288750, -0.281250, -0.273750, -0.242500, -0.227500, -0.196250, -0.213750, -0.196250, -0.237500, -0.235000, -0.245000, -0.285000, -0.295000, -0.327500, -0.290000, -0.368750, -0.398750, -0.431250, -0.457500
#*# 	  -0.273750, -0.250000, -0.207500, -0.200000, -0.195000, -0.167500, -0.152500, -0.117500, -0.142500, -0.135000, -0.166250, -0.168750, -0.176250, -0.215000, -0.218750, -0.243750, -0.237500, -0.303750, -0.333750, -0.361250, -0.377500
#*# 	  -0.243750, -0.227500, -0.182500, -0.168750, -0.131250, -0.116250, -0.116250, -0.102500, -0.128750, -0.123750, -0.135000, -0.136250, -0.140000, -0.180000, -0.195000, -0.231250, -0.212500, -0.281250, -0.301250, -0.327500, -0.348750
#*# 	  -0.233750, -0.208750, -0.137500, -0.126250, -0.120000, -0.098750, -0.100000, -0.061250, -0.088750, -0.081250, -0.111250, -0.103750, -0.103750, -0.142500, -0.143750, -0.200000, -0.188750, -0.236250, -0.266250, -0.301250, -0.328750
#*# 	  -0.202500, -0.188750, -0.133750, -0.120000, -0.103750, -0.070000, -0.066250, -0.030000, -0.053750, -0.056250, -0.077500, -0.068750, -0.075000, -0.106250, -0.125000, -0.151250, -0.138750, -0.196250, -0.237500, -0.271250, -0.286250
#*# 	  -0.187500, -0.156250, -0.091250, -0.095000, -0.073750, -0.053750, -0.051250, -0.007500, -0.025000, -0.005000, -0.043750, -0.031250, -0.036250, -0.075000, -0.081250, -0.115000, -0.097500, -0.152500, -0.186250, -0.220000, -0.251250
#*# 	  -0.147500, -0.131250, -0.081250, -0.068750, -0.055000, -0.028750, -0.021250, 0.008750, -0.010000, -0.002500, -0.022500, -0.007500, -0.020000, -0.048750, -0.056250, -0.087500, -0.056250, -0.123750, -0.148750, -0.182500, -0.203750
#*# 	  -0.147500, -0.128750, -0.082500, -0.061250, -0.053750, -0.013750, -0.003750, 0.021250, 0.005000, 0.007500, -0.020000, -0.008750, -0.008750, -0.008750, -0.042500, -0.062500, -0.040000, -0.093750, -0.113750, -0.146250, -0.175000
#*# 	  -0.128750, -0.120000, -0.067500, -0.055000, -0.030000, 0.005000, 0.016250, 0.028750, -0.001250, 0.011250, -0.015000, 0.001250, -0.003750, -0.016250, -0.020000, -0.047500, -0.022500, -0.070000, -0.085000, -0.120000, -0.135000
#*# 	  -0.130000, -0.097500, -0.038750, -0.026250, -0.012500, 0.026250, 0.030000, 0.050000, 0.033750, 0.035000, -0.002500, 0.031250, 0.023750, 0.007500, 0.003750, -0.027500, 0.001250, -0.052500, -0.067500, -0.083750, -0.118750
#*# 	  -0.102500, -0.107500, -0.058750, -0.040000, -0.025000, 0.008750, 0.020000, 0.050000, 0.031250, 0.042500, 0.015000, 0.028750, 0.020000, 0.001250, 0.005000, -0.021250, 0.008750, -0.043750, -0.057500, -0.085000, -0.095000
#*# 	  -0.097500, -0.077500, -0.026250, -0.017500, -0.011250, 0.015000, 0.021250, 0.050000, 0.036250, 0.051250, 0.035000, 0.048750, 0.041250, 0.022500, 0.022500, -0.017500, 0.000000, -0.050000, -0.058750, -0.090000, -0.106250
#*# 	  -0.098750, -0.087500, -0.043750, -0.042500, -0.031250, -0.011250, 0.000000, 0.017500, -0.002500, 0.030000, 0.053750, 0.021250, 0.016250, 0.005000, -0.001250, -0.022500, 0.005000, -0.047500, -0.048750, -0.076250, -0.090000
#*# 	  -0.115000, -0.098750, -0.043750, -0.043750, -0.028750, 0.000000, 0.002500, 0.043750, 0.023750, 0.037500, 0.017500, 0.032500, 0.023750, 0.022500, 0.020000, -0.001250, 0.028750, 0.022500, -0.025000, -0.042500, -0.048750
#*# 	  -0.121250, -0.107500, -0.065000, -0.065000, -0.038750, -0.015000, -0.021250, -0.001250, -0.023750, 0.013750, -0.015000, 0.003750, -0.003750, 0.006250, 0.015000, 0.010000, 0.035000, -0.006250, -0.002500, -0.012500, -0.010000
#*# 	  -0.161250, -0.137500, -0.086250, -0.078750, -0.070000, -0.050000, -0.047500, -0.023750, -0.047500, -0.018750, -0.031250, -0.012500, -0.013750, -0.016250, -0.007500, -0.026250, 0.006250, -0.022500, -0.017500, -0.020000, -0.015000
#*# 	  -0.198750, -0.197500, -0.167500, -0.175000, -0.155000, -0.130000, -0.135000, -0.105000, -0.118750, -0.098750, -0.095000, -0.092500, -0.091250, -0.078750, -0.080000, -0.083750, -0.046250, -0.080000, -0.057500, -0.056250, -0.045000
#*# 	  -0.217500, -0.202500, -0.165000, -0.173750, -0.158750, -0.143750, -0.140000, -0.105000, -0.120000, -0.092500, -0.108750, -0.092500, -0.093750, -0.092500, -0.082500, -0.103750, -0.073750, -0.087500, -0.080000, -0.092500, -0.086250
#*# tension = 0.2
#*# min_x = 56.0
#*# algo = bicubic
#*# y_count = 21
#*# mesh_y_pps = 10
#*# min_y = 0.0
#*# x_count = 21
#*# max_y = 340.0
#*# mesh_x_pps = 10
#*# max_x = 360.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 32.370
#*# pid_ki = 5.395
#*# pid_kd = 48.554
#*#
#*# [bltouch]
#*# z_offset = 2.440
#*#
#*# [input_shaper]
#*# shaper_type_x = ei
#*# shaper_freq_x = 52.6
#*# shaper_type_y = ei
#*# shaper_freq_y = 62.0
#*#
#*# [bed_mesh bigMesh]
#*# version = 1
#*# points =
#*# 	  -0.475000, -0.470000, -0.437500, -0.403750, -0.362500, -0.333750, -0.332500, -0.303750, -0.310000, -0.315000, -0.317500, -0.316250, -0.322500, -0.353750, -0.358750, -0.408750, -0.398750, -0.443750, -0.461250, -0.491250, -0.493750
#*# 	  -0.417500, -0.430000, -0.406250, -0.376250, -0.370000, -0.331250, -0.335000, -0.313750, -0.321250, -0.310000, -0.325000, -0.325000, -0.327500, -0.361250, -0.378750, -0.415000, -0.413750, -0.457500, -0.465000, -0.497500, -0.495000
#*# 	  -0.400000, -0.373750, -0.318750, -0.305000, -0.297500, -0.276250, -0.272500, -0.230000, -0.258750, -0.260000, -0.296250, -0.295000, -0.287500, -0.316250, -0.323750, -0.381250, -0.371250, -0.421250, -0.451250, -0.476250, -0.497500
#*# 	  -0.322500, -0.312500, -0.288750, -0.281250, -0.273750, -0.242500, -0.227500, -0.196250, -0.213750, -0.196250, -0.237500, -0.235000, -0.245000, -0.285000, -0.295000, -0.327500, -0.290000, -0.368750, -0.398750, -0.431250, -0.457500
#*# 	  -0.273750, -0.250000, -0.207500, -0.200000, -0.195000, -0.167500, -0.152500, -0.117500, -0.142500, -0.135000, -0.166250, -0.168750, -0.176250, -0.215000, -0.218750, -0.243750, -0.237500, -0.303750, -0.333750, -0.361250, -0.377500
#*# 	  -0.243750, -0.227500, -0.182500, -0.168750, -0.131250, -0.116250, -0.116250, -0.102500, -0.128750, -0.123750, -0.135000, -0.136250, -0.140000, -0.180000, -0.195000, -0.231250, -0.212500, -0.281250, -0.301250, -0.327500, -0.348750
#*# 	  -0.233750, -0.208750, -0.137500, -0.126250, -0.120000, -0.098750, -0.100000, -0.061250, -0.088750, -0.081250, -0.111250, -0.103750, -0.103750, -0.142500, -0.143750, -0.200000, -0.188750, -0.236250, -0.266250, -0.301250, -0.328750
#*# 	  -0.202500, -0.188750, -0.133750, -0.120000, -0.103750, -0.070000, -0.066250, -0.030000, -0.053750, -0.056250, -0.077500, -0.068750, -0.075000, -0.106250, -0.125000, -0.151250, -0.138750, -0.196250, -0.237500, -0.271250, -0.286250
#*# 	  -0.187500, -0.156250, -0.091250, -0.095000, -0.073750, -0.053750, -0.051250, -0.007500, -0.025000, -0.005000, -0.043750, -0.031250, -0.036250, -0.075000, -0.081250, -0.115000, -0.097500, -0.152500, -0.186250, -0.220000, -0.251250
#*# 	  -0.147500, -0.131250, -0.081250, -0.068750, -0.055000, -0.028750, -0.021250, 0.008750, -0.010000, -0.002500, -0.022500, -0.007500, -0.020000, -0.048750, -0.056250, -0.087500, -0.056250, -0.123750, -0.148750, -0.182500, -0.203750
#*# 	  -0.147500, -0.128750, -0.082500, -0.061250, -0.053750, -0.013750, -0.003750, 0.021250, 0.005000, 0.007500, -0.020000, -0.008750, -0.008750, -0.008750, -0.042500, -0.062500, -0.040000, -0.093750, -0.113750, -0.146250, -0.175000
#*# 	  -0.128750, -0.120000, -0.067500, -0.055000, -0.030000, 0.005000, 0.016250, 0.028750, -0.001250, 0.011250, -0.015000, 0.001250, -0.003750, -0.016250, -0.020000, -0.047500, -0.022500, -0.070000, -0.085000, -0.120000, -0.135000
#*# 	  -0.130000, -0.097500, -0.038750, -0.026250, -0.012500, 0.026250, 0.030000, 0.050000, 0.033750, 0.035000, -0.002500, 0.031250, 0.023750, 0.007500, 0.003750, -0.027500, 0.001250, -0.052500, -0.067500, -0.083750, -0.118750
#*# 	  -0.102500, -0.107500, -0.058750, -0.040000, -0.025000, 0.008750, 0.020000, 0.050000, 0.031250, 0.042500, 0.015000, 0.028750, 0.020000, 0.001250, 0.005000, -0.021250, 0.008750, -0.043750, -0.057500, -0.085000, -0.095000
#*# 	  -0.097500, -0.077500, -0.026250, -0.017500, -0.011250, 0.015000, 0.021250, 0.050000, 0.036250, 0.051250, 0.035000, 0.048750, 0.041250, 0.022500, 0.022500, -0.017500, 0.000000, -0.050000, -0.058750, -0.090000, -0.106250
#*# 	  -0.098750, -0.087500, -0.043750, -0.042500, -0.031250, -0.011250, 0.000000, 0.017500, -0.002500, 0.030000, 0.053750, 0.021250, 0.016250, 0.005000, -0.001250, -0.022500, 0.005000, -0.047500, -0.048750, -0.076250, -0.090000
#*# 	  -0.115000, -0.098750, -0.043750, -0.043750, -0.028750, 0.000000, 0.002500, 0.043750, 0.023750, 0.037500, 0.017500, 0.032500, 0.023750, 0.022500, 0.020000, -0.001250, 0.028750, 0.022500, -0.025000, -0.042500, -0.048750
#*# 	  -0.121250, -0.107500, -0.065000, -0.065000, -0.038750, -0.015000, -0.021250, -0.001250, -0.023750, 0.013750, -0.015000, 0.003750, -0.003750, 0.006250, 0.015000, 0.010000, 0.035000, -0.006250, -0.002500, -0.012500, -0.010000
#*# 	  -0.161250, -0.137500, -0.086250, -0.078750, -0.070000, -0.050000, -0.047500, -0.023750, -0.047500, -0.018750, -0.031250, -0.012500, -0.013750, -0.016250, -0.007500, -0.026250, 0.006250, -0.022500, -0.017500, -0.020000, -0.015000
#*# 	  -0.198750, -0.197500, -0.167500, -0.175000, -0.155000, -0.130000, -0.135000, -0.105000, -0.118750, -0.098750, -0.095000, -0.092500, -0.091250, -0.078750, -0.080000, -0.083750, -0.046250, -0.080000, -0.057500, -0.056250, -0.045000
#*# 	  -0.217500, -0.202500, -0.165000, -0.173750, -0.158750, -0.143750, -0.140000, -0.105000, -0.120000, -0.092500, -0.108750, -0.092500, -0.093750, -0.092500, -0.082500, -0.103750, -0.073750, -0.087500, -0.080000, -0.092500, -0.086250
#*# x_count = 21
#*# y_count = 21
#*# mesh_x_pps = 10
#*# mesh_y_pps = 10
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 56.0
#*# max_x = 360.0
#*# min_y = 0.0
#*# max_y = 340.0
