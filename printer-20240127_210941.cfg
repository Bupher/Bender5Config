[include moonraker_obico_macros.cfg]
# This file contains pin mappings for the Creality Ender 5 Plus with a BTT Octopus Pro.

# See docs/Config_Reference.md for a description of parameters.

[include mainsail.cfg]
[include macros.cfg]
[include Adaptive_Mesh.cfg]
[include Line_Purge.cfg]
[include tmc2209.cfg]
[include fans.cfg]
[include extruder.cfg]
[include chameleonMacros.cfg]
[include notifications.cfg]

[stepper_x]
step_pin: PF13
dir_pin: !PF12
enable_pin: !PF14
microsteps: 16
rotation_distance: 40
endstop_pin: PG6
position_endstop: 365
position_max: 365
homing_speed: 100

[stepper_y]
step_pin: PG0
dir_pin: !PG1
enable_pin: !PF15
microsteps: 16
rotation_distance: 40
endstop_pin: PG9
position_endstop: 365
position_max: 365
homing_speed: 100

[stepper_z1]
step_pin: PF11
dir_pin: !PG3
enable_pin: !PG5
microsteps: 16
rotation_distance: 4

[stepper_z]
step_pin: PG4
dir_pin: !PC1
enable_pin: !PA0
microsteps: 16
rotation_distance: 4
endstop_pin: probe:z_virtual_endstop
#endstop_pin: PG12
#position_endstop: 0
position_max: 400
position_min: -5
homing_speed: 10.0

[z_tilt]
z_positions: -40,200
  400,200
points: 0,200
  300,200
speed: 150
horizontal_move_z: 5
retries: 10
retry_tolerance: 0.01

[safe_z_home]
#home_xy_position: 329.60, 372
home_xy_position: 175, 175
speed: 100
z_hop: 10
z_hop_speed: 5

[bltouch]
sensor_pin: ^PB7
control_pin: PB6
x_offset: 56
y_offset: -24
#z_offset: 2
speed: 3.0
stow_on_each_sample: false
probe_with_touch_mode: true
#pin_up_touch_mode_reports_triggered: False

[bed_mesh]
speed: 200
horizontal_move_z: 5
mesh_min: 56, 0
mesh_max: 360, 340
#probe_count: 5,5
probe_count: 21, 21
algorithm: bicubic
bicubic_tension: 0.2
mesh_pps: 10,10
fade_start:1
fade_end:3

[heater_bed]
heater_pin: PB11 #HE3
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PF7
control: pid
pid_Kp: 690.34
pid_Ki: 111.47
pid_Kd: 1068.83
min_temp: 0
max_temp: 130

[temperature_sensor RPi]
sensor_type: temperature_host

[mcu]
#serial: /dev/serial/by-id/usb-Klipper_stm32f446xx_26002900105053424E363620-if00
#serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.3:1.0
#serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.1:1.0
serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.2:1.0

#[mcu adxl]
#serial: /dev/serial/by-path/platform-fd500000.pcie-pci-0000:01:00.0-usb-0:1.4:1.0

#[adxl345]
#cs_pin: adxl:gpio9
#spi_software_sclk_pin: adxl:gpio10
#spi_software_mosi_pin: adxl:gpio11
#spi_software_miso_pin: adxl:gpio12

#[resonance_tester]
#accel_chip: adxl345
#probe_points:
#    175, 175, 200

[printer]
kinematics: cartesian
max_velocity: 500
#max_accel: 4000 #can run here, but no reason to for now
max_accel: 2000 #run here for now
max_z_velocity: 15
max_z_accel: 150

[endstop_phase]

[respond]

[force_move]
enable_force_move: true
#   Set to true to enable FORCE_MOVE and SET_KINEMATIC_POSITION
#   extended G-Code commands. The default is false.

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.251380, -0.231380, -0.198880, -0.148880, -0.097630, -0.066380, -0.071380, -0.081380, -0.070130, -0.036380, -0.035130, -0.060130, -0.072630, -0.051380, -0.060130, -0.087630, -0.136380, -0.157630, -0.117630, -0.146380, -0.160130
#*# 	  -0.206380, -0.183880, -0.166380, -0.157630, -0.095130, -0.071380, -0.056380, -0.078880, -0.058880, -0.035130, -0.041380, -0.068880, -0.062630, -0.051380, -0.057630, -0.086380, -0.142630, -0.157630, -0.135130, -0.168880, -0.207630
#*# 	  -0.177630, -0.157630, -0.150130, -0.128880, -0.071380, -0.055130, -0.043880, -0.042630, -0.022630, -0.000130, -0.007630, -0.042630, -0.053880, -0.041380, -0.053880, -0.092630, -0.133880, -0.147630, -0.125130, -0.156380, -0.202630
#*# 	  -0.111380, -0.072630, -0.067630, -0.055130, -0.017630, -0.001380, -0.002630, -0.002630, 0.031120, 0.054870, 0.038620, 0.011120, 0.002370, 0.011120, 0.008620, -0.030130, -0.068880, -0.086380, -0.065130, -0.090130, -0.146380
#*# 	  -0.077630, -0.060130, -0.053880, -0.026380, 0.024870, 0.042370, 0.043620, 0.028620, 0.062370, 0.079870, 0.063620, 0.033620, 0.032370, 0.039870, 0.036120, 0.002370, -0.035130, -0.061380, -0.040130, -0.061380, -0.101380
#*# 	  -0.056380, -0.026380, -0.022630, 0.002370, 0.042370, 0.067370, 0.063620, 0.054870, 0.087370, 0.106120, 0.101120, 0.073620, 0.056120, 0.071120, 0.066120, 0.031120, -0.017630, -0.037630, -0.013880, -0.041380, -0.086380
#*# 	  -0.043880, -0.028880, -0.005130, 0.001120, 0.054870, 0.067370, 0.071120, 0.059870, 0.086120, 0.104870, 0.107370, 0.069870, 0.057370, 0.071120, 0.064870, 0.024870, -0.017630, -0.047630, -0.030130, -0.052630, -0.093880
#*# 	  -0.051380, -0.022630, 0.001120, 0.033620, 0.092370, 0.102370, 0.111120, 0.096120, 0.122370, 0.141120, 0.131120, 0.097370, 0.091120, 0.102370, 0.097370, 0.063620, 0.018620, -0.005130, 0.017370, -0.022630, -0.078880
#*# 	  -0.042630, -0.010130, 0.004870, 0.038620, 0.087370, 0.101120, 0.098620, 0.084870, 0.113620, 0.142370, 0.128620, 0.101120, 0.103620, 0.123620, 0.118620, 0.083620, 0.037370, 0.007370, 0.024870, -0.018880, -0.063880
#*# 	  -0.031380, 0.006120, 0.028620, 0.057370, 0.113620, 0.136120, 0.129870, 0.104870, 0.131120, 0.146120, 0.153620, 0.123620, 0.124870, 0.134870, 0.139870, 0.103620, 0.069870, 0.046120, 0.061120, 0.019870, -0.040130
#*# 	  -0.023880, 0.006120, 0.017370, 0.046120, 0.101120, 0.122370, 0.131120, 0.104870, 0.131120, 0.151120, 0.148620, 0.113620, 0.116120, 0.127370, 0.133620, 0.092370, 0.057370, 0.044870, 0.063620, 0.024870, -0.016380
#*# 	  -0.011380, 0.022370, 0.029870, 0.039870, 0.093620, 0.117370, 0.124870, 0.104870, 0.138620, 0.157370, 0.166120, 0.136120, 0.134870, 0.141120, 0.142370, 0.106120, 0.076120, 0.061120, 0.079870, 0.058620, 0.001120
#*# 	  0.008620, 0.014870, 0.028620, 0.044870, 0.102370, 0.116120, 0.112370, 0.109870, 0.128620, 0.171120, 0.161120, 0.142370, 0.129870, 0.137370, 0.154870, 0.091120, 0.059870, 0.039870, 0.072370, 0.041120, 0.009870
#*# 	  -0.026380, -0.000130, 0.011120, 0.033620, 0.201120, 0.119870, 0.117370, 0.109870, 0.133620, 0.154870, 0.146120, 0.116120, 0.111120, 0.123620, 0.126120, 0.097370, 0.056120, 0.049870, 0.078620, 0.048620, -0.006380
#*# 	  -0.038880, -0.011380, 0.012370, 0.022370, 0.074870, 0.094870, 0.079870, 0.073620, 0.096120, 0.121120, 0.116120, 0.092370, 0.092370, 0.109870, 0.112370, 0.077370, 0.031120, 0.023620, 0.043620, 0.011120, -0.027630
#*# 	  -0.061380, -0.027630, -0.001380, 0.017370, 0.067370, 0.088620, 0.076120, 0.072370, 0.077370, 0.116120, 0.093620, 0.079870, 0.072370, 0.089870, 0.121120, 0.079870, 0.039870, 0.024870, 0.054870, 0.023620, -0.027630
#*# 	  -0.078880, -0.060130, -0.041380, 0.101120, 0.038620, 0.069870, 0.057370, 0.053620, 0.122370, 0.096120, 0.087370, 0.057370, 0.061120, 0.078620, 0.091120, 0.057370, 0.024870, 0.018620, 0.059870, 0.029870, -0.002630
#*# 	  -0.100130, -0.056380, -0.053880, -0.027630, 0.026120, 0.032370, 0.023620, 0.012370, 0.036120, 0.061120, 0.069870, 0.048620, 0.044870, 0.067370, 0.083620, 0.061120, 0.028620, 0.026120, 0.072370, 0.061120, 0.018620
#*# 	  -0.140130, -0.126380, -0.108880, -0.093880, -0.040130, -0.017630, -0.027630, -0.033880, -0.006380, 0.016120, 0.013620, -0.010130, -0.010130, 0.007370, 0.023620, -0.003880, -0.030130, -0.022630, 0.023620, 0.018620, -0.016380
#*# 	  -0.196380, -0.183880, -0.172630, -0.160130, -0.112630, -0.063880, -0.107630, -0.118880, -0.095130, -0.060130, -0.056380, -0.087630, -0.086380, -0.061380, -0.048880, -0.060130, -0.092630, -0.088880, -0.047630, -0.045130, -0.075130
#*# 	  -0.211380, -0.202630, -0.197630, -0.187630, -0.135130, -0.128880, -0.138880, -0.166380, -0.123880, -0.105130, -0.102630, -0.117630, -0.112630, -0.081380, -0.090130, -0.115130, -0.140130, -0.136380, -0.103880, -0.111380, -0.126380
#*# tension = 0.2
#*# min_x = 56.0
#*# algo = bicubic
#*# y_count = 21
#*# mesh_y_pps = 10
#*# min_y = 0.0
#*# x_count = 21
#*# max_y = 340.0
#*# mesh_x_pps = 10
#*# max_x = 360.0
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 32.370
#*# pid_ki = 5.395
#*# pid_kd = 48.554
#*#
#*# [bltouch]
#*# z_offset = 2.85
#*#
#*# [input_shaper]
#*# shaper_type_x = ei
#*# shaper_freq_x = 52.6
#*# shaper_type_y = ei
#*# shaper_freq_y = 62.0
#*#
#*# [bed_mesh bigMesh]
#*# version = 1
#*# points =
#*# 	  -0.251380, -0.231380, -0.198880, -0.148880, -0.097630, -0.066380, -0.071380, -0.081380, -0.070130, -0.036380, -0.035130, -0.060130, -0.072630, -0.051380, -0.060130, -0.087630, -0.136380, -0.157630, -0.117630, -0.146380, -0.160130
#*# 	  -0.206380, -0.183880, -0.166380, -0.157630, -0.095130, -0.071380, -0.056380, -0.078880, -0.058880, -0.035130, -0.041380, -0.068880, -0.062630, -0.051380, -0.057630, -0.086380, -0.142630, -0.157630, -0.135130, -0.168880, -0.207630
#*# 	  -0.177630, -0.157630, -0.150130, -0.128880, -0.071380, -0.055130, -0.043880, -0.042630, -0.022630, -0.000130, -0.007630, -0.042630, -0.053880, -0.041380, -0.053880, -0.092630, -0.133880, -0.147630, -0.125130, -0.156380, -0.202630
#*# 	  -0.111380, -0.072630, -0.067630, -0.055130, -0.017630, -0.001380, -0.002630, -0.002630, 0.031120, 0.054870, 0.038620, 0.011120, 0.002370, 0.011120, 0.008620, -0.030130, -0.068880, -0.086380, -0.065130, -0.090130, -0.146380
#*# 	  -0.077630, -0.060130, -0.053880, -0.026380, 0.024870, 0.042370, 0.043620, 0.028620, 0.062370, 0.079870, 0.063620, 0.033620, 0.032370, 0.039870, 0.036120, 0.002370, -0.035130, -0.061380, -0.040130, -0.061380, -0.101380
#*# 	  -0.056380, -0.026380, -0.022630, 0.002370, 0.042370, 0.067370, 0.063620, 0.054870, 0.087370, 0.106120, 0.101120, 0.073620, 0.056120, 0.071120, 0.066120, 0.031120, -0.017630, -0.037630, -0.013880, -0.041380, -0.086380
#*# 	  -0.043880, -0.028880, -0.005130, 0.001120, 0.054870, 0.067370, 0.071120, 0.059870, 0.086120, 0.104870, 0.107370, 0.069870, 0.057370, 0.071120, 0.064870, 0.024870, -0.017630, -0.047630, -0.030130, -0.052630, -0.093880
#*# 	  -0.051380, -0.022630, 0.001120, 0.033620, 0.092370, 0.102370, 0.111120, 0.096120, 0.122370, 0.141120, 0.131120, 0.097370, 0.091120, 0.102370, 0.097370, 0.063620, 0.018620, -0.005130, 0.017370, -0.022630, -0.078880
#*# 	  -0.042630, -0.010130, 0.004870, 0.038620, 0.087370, 0.101120, 0.098620, 0.084870, 0.113620, 0.142370, 0.128620, 0.101120, 0.103620, 0.123620, 0.118620, 0.083620, 0.037370, 0.007370, 0.024870, -0.018880, -0.063880
#*# 	  -0.031380, 0.006120, 0.028620, 0.057370, 0.113620, 0.136120, 0.129870, 0.104870, 0.131120, 0.146120, 0.153620, 0.123620, 0.124870, 0.134870, 0.139870, 0.103620, 0.069870, 0.046120, 0.061120, 0.019870, -0.040130
#*# 	  -0.023880, 0.006120, 0.017370, 0.046120, 0.101120, 0.122370, 0.131120, 0.104870, 0.131120, 0.151120, 0.148620, 0.113620, 0.116120, 0.127370, 0.133620, 0.092370, 0.057370, 0.044870, 0.063620, 0.024870, -0.016380
#*# 	  -0.011380, 0.022370, 0.029870, 0.039870, 0.093620, 0.117370, 0.124870, 0.104870, 0.138620, 0.157370, 0.166120, 0.136120, 0.134870, 0.141120, 0.142370, 0.106120, 0.076120, 0.061120, 0.079870, 0.058620, 0.001120
#*# 	  0.008620, 0.014870, 0.028620, 0.044870, 0.102370, 0.116120, 0.112370, 0.109870, 0.128620, 0.171120, 0.161120, 0.142370, 0.129870, 0.137370, 0.154870, 0.091120, 0.059870, 0.039870, 0.072370, 0.041120, 0.009870
#*# 	  -0.026380, -0.000130, 0.011120, 0.033620, 0.201120, 0.119870, 0.117370, 0.109870, 0.133620, 0.154870, 0.146120, 0.116120, 0.111120, 0.123620, 0.126120, 0.097370, 0.056120, 0.049870, 0.078620, 0.048620, -0.006380
#*# 	  -0.038880, -0.011380, 0.012370, 0.022370, 0.074870, 0.094870, 0.079870, 0.073620, 0.096120, 0.121120, 0.116120, 0.092370, 0.092370, 0.109870, 0.112370, 0.077370, 0.031120, 0.023620, 0.043620, 0.011120, -0.027630
#*# 	  -0.061380, -0.027630, -0.001380, 0.017370, 0.067370, 0.088620, 0.076120, 0.072370, 0.077370, 0.116120, 0.093620, 0.079870, 0.072370, 0.089870, 0.121120, 0.079870, 0.039870, 0.024870, 0.054870, 0.023620, -0.027630
#*# 	  -0.078880, -0.060130, -0.041380, 0.101120, 0.038620, 0.069870, 0.057370, 0.053620, 0.122370, 0.096120, 0.087370, 0.057370, 0.061120, 0.078620, 0.091120, 0.057370, 0.024870, 0.018620, 0.059870, 0.029870, -0.002630
#*# 	  -0.100130, -0.056380, -0.053880, -0.027630, 0.026120, 0.032370, 0.023620, 0.012370, 0.036120, 0.061120, 0.069870, 0.048620, 0.044870, 0.067370, 0.083620, 0.061120, 0.028620, 0.026120, 0.072370, 0.061120, 0.018620
#*# 	  -0.140130, -0.126380, -0.108880, -0.093880, -0.040130, -0.017630, -0.027630, -0.033880, -0.006380, 0.016120, 0.013620, -0.010130, -0.010130, 0.007370, 0.023620, -0.003880, -0.030130, -0.022630, 0.023620, 0.018620, -0.016380
#*# 	  -0.196380, -0.183880, -0.172630, -0.160130, -0.112630, -0.063880, -0.107630, -0.118880, -0.095130, -0.060130, -0.056380, -0.087630, -0.086380, -0.061380, -0.048880, -0.060130, -0.092630, -0.088880, -0.047630, -0.045130, -0.075130
#*# 	  -0.211380, -0.202630, -0.197630, -0.187630, -0.135130, -0.128880, -0.138880, -0.166380, -0.123880, -0.105130, -0.102630, -0.117630, -0.112630, -0.081380, -0.090130, -0.115130, -0.140130, -0.136380, -0.103880, -0.111380, -0.126380
#*# x_count = 21
#*# y_count = 21
#*# mesh_x_pps = 10
#*# mesh_y_pps = 10
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 56.0
#*# max_x = 360.0
#*# min_y = 0.0
#*# max_y = 340.0
